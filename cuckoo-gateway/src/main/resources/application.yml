# 引入公共配置
spring:
  config:
    import: classpath:application-common.yml

  application:
    name: api-gateway

  # Nacos 服务特定配置
  cloud:
    nacos:
      config:
        shared-configs:
          - data-id: shared-config.yml
            group: DEFAULT_GROUP
            refresh: true

    # Spring Cloud Gateway 路由配置
    gateway:
      discovery:
        locator:
          enabled: true
          lower-case-service-id: true
      routes:
        # 用户服务路由
        - id: user-service
          uri: lb://user-service
          predicates:
            - Path=/api/users/**

        # 商品服务路由
        - id: product-service
          uri: lb://product-service
          predicates:
            - Path=/api/products/**

        # 库存服务路由
        - id: inventory-service
          uri: lb://inventory-service
          predicates:
            - Path=/api/inventory/**

        # 订单服务路由
        - id: order-service
          uri: lb://order-service
          predicates:
            - Path=/api/orders/**

        # 支付服务路由
        - id: payment-service
          uri: lb://payment-service
          predicates:
            - Path=/api/payments/**

        # 通知服务路由
        - id: notification-service
          uri: lb://notification-service
          predicates:
            - Path=/api/notifications/**

  # Redis 配置
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 3000ms

# 服务端口
server:
  port: 8080

# OpenTelemetry 服务名（覆盖公共配置）
otel:
  service:
    name: ${spring.application.name}

# JWT 配置
jwt:
  secret: cuckoo-microservices-secret-key-for-jwt-token-generation-and-validation
  expiration: 86400000  # 24 小时（毫秒）
